"use strict";(self.webpackChunkaktyn_github_io=self.webpackChunkaktyn_github_io||[]).push([[127],{6127:(e,t,s)=>{s.r(t),s.d(t,{AfterimagePass:()=>a});var i=s(9408),r=s(3521);const n={name:"AfterimageShader",uniforms:{damp:{value:.96},tOld:{value:null},tNew:{value:null}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float damp;\n\n\t\tuniform sampler2D tOld;\n\t\tuniform sampler2D tNew;\n\n\t\tvarying vec2 vUv;\n\n\t\tvec4 when_gt( vec4 x, float y ) {\n\n\t\t\treturn max( sign( x - y ), 0.0 );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 texelOld = texture2D( tOld, vUv );\n\t\t\tvec4 texelNew = texture2D( tNew, vUv );\n\n\t\t\ttexelOld *= damp * when_gt( texelOld, 0.1 );\n\n\t\t\tgl_FragColor = max(texelNew, texelOld);\n\n\t\t}"};class a extends r.o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.96;super(),this.shader=n,this.uniforms=i.LlO.clone(this.shader.uniforms),this.uniforms.damp.value=e,this.textureComp=new i.nWS(window.innerWidth,window.innerHeight,{magFilter:i.hxR,type:i.ix0}),this.textureOld=new i.nWS(window.innerWidth,window.innerHeight,{magFilter:i.hxR,type:i.ix0}),this.compFsMaterial=new i.BKk({uniforms:this.uniforms,vertexShader:this.shader.vertexShader,fragmentShader:this.shader.fragmentShader}),this.compFsQuad=new r.F(this.compFsMaterial),this.copyFsMaterial=new i.V9B,this.copyFsQuad=new r.F(this.copyFsMaterial)}render(e,t,s){this.uniforms.tOld.value=this.textureOld.texture,this.uniforms.tNew.value=s.texture,e.setRenderTarget(this.textureComp),this.compFsQuad.render(e),this.copyFsQuad.material.map=this.textureComp.texture,this.renderToScreen?(e.setRenderTarget(null),this.copyFsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.copyFsQuad.render(e));const i=this.textureOld;this.textureOld=this.textureComp,this.textureComp=i}setSize(e,t){this.textureComp.setSize(e,t),this.textureOld.setSize(e,t)}dispose(){this.textureComp.dispose(),this.textureOld.dispose(),this.compFsMaterial.dispose(),this.copyFsMaterial.dispose(),this.compFsQuad.dispose(),this.copyFsQuad.dispose()}}},3521:(e,t,s)=>{s.d(t,{F:()=>d,o:()=>r});var i=s(9408);class r{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const n=new i.qUd(-1,1,1,-1,0,1);class a extends i.LoY{constructor(){super(),this.setAttribute("position",new i.qtW([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new i.qtW([0,2,0,0,2,0],2))}}const o=new a;class d{constructor(e){this._mesh=new i.eaF(o,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,n)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}}}]);
//# sourceMappingURL=127.63e6ae36.chunk.js.map