@import './palette.scss';
@import './typography.scss';
@import './animation.scss';

$tooltip-base-bg-color: lighten($backgroundPrimary, 10%);
$tooltip-base-border-color: $tooltip-base-bg-color;

[data-tooltip] {
  position: relative;
  &:before,
  &:after {
    opacity: 0;
    position: absolute;
    left: 50%;
    backface-visibility: hidden;
  }
  &:before {
    border-style: solid;
    border-top-width: 0.25rem;
    border-right-width: 0.25rem;
    border-bottom-width: 0.25rem;
    border-left-width: 0.25rem;
    border-bottom-width: 0;
    content: '';
    top: -0.125rem;
    width: 0;
    height: 0;
    transform: translate(-50%, calc(-50% - 0.375rem));
    transition:
      opacity 0.1s ease-in 0s,
      transform 0.6s $springEase 0s;
    z-index: 110000;
  }
  &:after {
    content: attr(data-tooltip);
    text-align: center;
    padding: 0.5rem 0.75rem;
    border-radius: 2rem;
    color: $textPrimary;
    @extend .text-small;
    transition:
      opacity 0.4s ease-in,
      transform 0.6s $springEase;
    pointer-events: none;
    z-index: 999;
    white-space: nowrap;
    bottom: 100%;
    transform: translate(-50%, 0.75rem);
    max-width: 20rem;
    text-overflow: ellipsis;
    overflow: hidden;
    box-shadow: 0 0.125rem 0.625rem 0.125rem rgba(0, 0, 0, 0.1);
  }
}

[data-tooltip]:after {
  background: $tooltip-base-bg-color;
}

[data-tooltip]:before {
  border-top-color: $tooltip-base-bg-color;
  border-right-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
}

[data-tooltip][data-tooltip-conf*='right']:before {
  border-top-color: transparent;
  border-right-color: $tooltip-base-border-color;
  border-bottom-color: transparent;
  border-left-color: transparent;
}

[data-tooltip][data-tooltip-conf*='bottom']:before {
  border-top-color: transparent;
  border-right-color: transparent;
  border-bottom-color: $tooltip-base-border-color;
  border-left-color: transparent;
}

[data-tooltip][data-tooltip-conf*='left']:before {
  border-top-color: transparent;
  border-right-color: transparent;
  border-bottom-color: transparent;
  border-left-color: $tooltip-base-border-color;
}

[data-tooltip] {
  &:focus,
  &:hover {
    &:before,
    &:after {
      opacity: 1;
    }
  }
  &:focus,
  &:hover {
    &:before {
      transition:
        opacity 0.1s ease-in 0.1s,
        transform 0.6s $springEase 0.1s;
      transform: translate(-50%, calc(-50% - 0.125rem));
    }
    &:after {
      transform: translate(-50%, -0.375rem);
    }
  }
}

[data-tooltip][data-tooltip-conf*='right']:before {
  border-style: solid;
  border-top-width: 0.25rem;
  border-right-width: 0.25rem;
  border-bottom-width: 0.25rem;
  border-left-width: 0.25rem;
  border-left-width: 0;
  left: auto;
  right: -0.375rem;
  top: 50%;
  transform: translate(calc(-50% + 0.4375rem), -50%);
}

[data-tooltip][data-tooltip-conf*='right']:after {
  top: 50%;
  left: 100%;
  bottom: auto;
  transform: translate(-0.75rem, -50%);
}

[data-tooltip][data-tooltip-conf*='right']:focus:before,
[data-tooltip][data-tooltip-conf*='right']:hover:before {
  transform: translate(calc(-50% + 0.1875rem), -50%);
}

[data-tooltip][data-tooltip-conf*='right']:focus:after,
[data-tooltip][data-tooltip-conf*='right']:hover:after {
  transform: translate(0.4375rem, -50%);
}

[data-tooltip][data-tooltip-conf*='bottom']:before {
  border-style: solid;
  border-top-width: 0.25rem;
  border-right-width: 0.25rem;
  border-bottom-width: 0.25rem;
  border-left-width: 0.25rem;
  border-top-width: 0;
  top: auto;
  bottom: -0.375rem;
  left: 50%;
  transform: translate(-50%, calc(-50% + 0.375rem));
}

[data-tooltip][data-tooltip-conf*='bottom']:after {
  top: 100%;
  left: 50%;
  bottom: auto;
  transform: translate(-50%, -0.75rem);
}

[data-tooltip][data-tooltip-conf*='bottom']:focus:before,
[data-tooltip][data-tooltip-conf*='bottom']:hover:before {
  transform: translate(-50%, calc(-50% + 0.125rem));
}

[data-tooltip][data-tooltip-conf*='bottom']:focus:after,
[data-tooltip][data-tooltip-conf*='bottom']:hover:after {
  transform: translate(-50%, 0.375rem);
}

[data-tooltip][data-tooltip-conf*='left']:before {
  border-style: solid;
  border-top-width: 0.25rem;
  border-right-width: 0.25rem;
  border-bottom-width: 0.25rem;
  border-left-width: 0.25rem;
  border-right-width: 0;
  left: -0.125rem;
  top: 50%;
  width: 0;
  height: 0;
  transform: translate(calc(-50% - 0.5rem), -50%);
}

[data-tooltip][data-tooltip-conf*='left']:after {
  top: 50%;
  right: 100%;
  bottom: auto;
  left: auto;
  transform: translate(0.75rem, -50%);
}

[data-tooltip][data-tooltip-conf*='left']:focus:after,
[data-tooltip][data-tooltip-conf*='left']:hover:after {
  transform: translate(-0.4375rem, -50%);
}

[data-tooltip][data-tooltip-conf*='left']:focus:before,
[data-tooltip][data-tooltip-conf*='left']:hover:before {
  transform: translate(calc(-50% - 0.1875rem), -50%);
}

[data-tooltip][data-tooltip-conf*='multiline']:after {
  word-break: break-word;
  white-space: normal;
  min-width: 11.25rem;
  text-overflow: clip;
}

[data-tooltip][data-tooltip-conf*='no-arrow']:before {
  display: none;
}

[data-tooltip][data-tooltip-conf*='square']:after {
  border-radius: 0;
}

[data-tooltip][data-tooltip=''] {
  &:after,
  &:before {
    display: none;
  }
}
